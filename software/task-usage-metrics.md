---
title: 'Set up task usage metrics on Astronomer Software'
sidebar_label: 'Set up task usage metrics'
id: task-usage-metrics
description: Configure the Astronomer Software platform to record metrics about task usage.
---

Task usage metrics provide a high level view of your Airflow task runs and can help you quickly identify Deployments where more tasks a running or failing than expected.

If your organization's usage of Astronomer is priced based on successful task runs, you must configure task usage metrics so that you can export figures about your task runs to Astronomer.

## Enable task usage metrics on your Software installation

To enable task usage metrics for your entire Astronomer installation, configure the following values in your `config,yaml` file:

```yaml
global:
  taskUsageMetricsEnabled: true

  populateHourlyTaskAuditMetrics:
    # Populate the Software UI with the latest task usage metrics on the 57th minute of every hour https://crontab.guru/#57_*_*_*_*
    schedule: "57 * * * *"

houston:
  cleanupTaskUsageData:
	  olderThan: 90
```

After you set this configuration, Astronomer Software begins to run a cron job for collecting task usage metrics, sending them to Astronomer Support, and displaying them in the Software UI.

To manually send task usage metrics to Astronomer support instead, see [Export task usage metrics manually](#export-task-usage-metrics-manually).

## Set up task usage metrics on a Deployment (_Required only for Astronomer Certified and Astro Runtime < 6.1_)

Task usage metrics are generated by the Astronomer-maintained `airflow-analytics-plugin`. This plugin queries the Airflow metadata database and returns usage analytics at an HTTP endpoint. Deployments using Runtime 6.1 or later have this plugin installed by default.

To install the plugin on a Deployment using Astronomer Certified or Astro Runtime earlier than 6.1:

1. Add the following line to the `requirements.txt` file of your Astro project:

    ```text
    https://github.com/astronomer/airflow-analytics-plugin/releases/download/1.0.0/astronomer_analytics_plugin-1.0.0-py3-none-any.whl
    ```

2. Push your changes to Astronomer Software. See [Deploy code](deploy-cli.md).


## View task usage metrics

Depending on your permissions, you can view task usage metrics for a given installation, Workspace, or Deployment from the Software UI.

- View an installation's task usage: In the Software UI, go to **System Admin** > **Task Usage**. This page shows total task runs, as well as task runs per Workspace.
- View a Workspace's task usage: In the Software UI, select a Workspace and go to **Task Usage**. This page shows the Workspace's total task runs, as well as task runs per Deployment.
- View a Deployment's task usage: In the Software UI, select open a Workspace, select a Deployment in the Workspace, and go to **Task Usage**. This page shows the Deployment's total task runs, as well as task runs per day.

## Export task usage metrics manually

1. In the Software UI, go to **System Admin** > **Task Usage**.
2. Click **Export Table**.